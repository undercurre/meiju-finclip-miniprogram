<wxs src="../../common.wxs" module="c1"></wxs>
<wxs src="./my-reward.wxs" module="s1"></wxs>
<view class="my-container">
  <view class="common-main" wx:for="{{ props.basicList }}" wx:key="ids" wx:for-item="basicItem">
    <block wx:if="{{isLogon}}">
      <!-- custom：allPageInfoCustomList列表请查看containerMixins -->
      <view wx:if="{{ basicItem.custom == '0' }}"></view>
      <view wx:else>
        <block wx:if="{{basicItem.custom == 3 && awardsList.length}}">
          <view
            class="common-target bg-normal"
            bindtap="goRewardList"
            data-item="{{ basicItem }}"
            style="{{c1.getBIStyle(basicItem)}}"
          ></view>
        </block>
        <block wx:if="{{basicItem.custom == 9 && !awardsList.length}}">
          <image
            class="common-target bg-normal"
            src="{{basicItem.basicImgUrl}}"
            style="{{c1.getBIStyle(basicItem)}}"
          ></image>
        </block>
      </view>
    </block>
    <!-- 未登录 -->
    <block wx:else>
      <view>
        <block wx:if="{{ basicItem.custom == 7 }}">
          <image
            class="common-target bg-normal"
            src="{{basicItem.basicImgUrl}}"
            style="{{c1.getBIStyle(basicItem)}}"
          ></image>
        </block>
        <block wx:if="{{ basicItem.custom == 8 }}">
          <button
            hover-class="none"
            bindtap="actionGetphonenumber"
            data-item="{{ basicItem }}"
            class="common-target button-common bg-normal"
            style="{{c1.getBIStyle(basicItem)}}"
          ></button>
        </block>
      </view>
    </block>
  </view>
  <view class="common-main">
    <view class="sec-reward">
      <view class="main-reward normal-reward" wx:if="{{isLogon && awardsList.length&&props.basicList.length!=0}}">
        <view class="normal-left">
          <image class="normal-left-img" src="{{awardsInfo.imgUrl}}"></image>
        </view>
        <view class="normal-content">
          <view>
            <view class="overflow-ellipsis">{{awardsInfo.name}}</view>
            <view class="text-overflow normal-content-explain">{{awardsInfo.desc}}</view>
          </view>
        </view>
        <!-- 状态：0 未领取 1已领取 2已发放 -->
        <!-- custom：allPageInfoCustomList列表请查看containerMixins -->
        <!-- 类型列表请查看containerMixins -->
        <view class="normal-btn">
          <block wx:for="{{ props.basicList }}" wx:for-item="basicItem" wx:key="ids">
            <!-- 实物奖品 -->
            <block wx:if="{{ awardsInfo.type == 0 }}">
              <button
                hover-class="none"
                class="button-common bg-normal"
                bindtap="actionGoLogistics"
                data-item="{{ awardsInfo }}"
                style="background-image:url({{ basicItem.basicImgUrl }});{{c1.contactStyle(basicItem,'wi,he')}}"
                wx:if="{{awardsInfo.addressFlag == 1 && basicItem.custom == 2}}"
              ></button>
              <!-- 填写地址 -->
              <button
                hover-class="none"
                class="button-common bg-normal"
                bindtap="actionReceive"
                data-item="{{ basicItem }}"
                style="background-image:url({{ basicItem.basicImgUrl }});{{c1.contactStyle(basicItem,'wi,he')}}"
                wx:if="{{ !awardsInfo.addressFlag == 1 && basicItem.custom == 12}}"
              ></button>
            </block>
            <block wx:else>
              <!-- 领取券码 awardsInfo.type请看containerMixins -->
              <button
                hover-class="none"
                class="button-common bg-normal"
                bindtap="actionReceive"
                data-item="{{ basicItem }}"
                data-targeturl="{{ basicItem.targetUrl }}"
                style="background-image:url({{ basicItem.basicImgUrl }});{{c1.contactStyle(basicItem,'wi,he')}}"
                wx:if="{{s1.isTrue('actionReceive',awardsInfo,basicItem)}}"
              ></button>
              <button
                hover-class="none"
                class="button-common bg-normal"
                bindtap="actionCheckCharge"
                data-item="{{ basicItem }}"
                data-targeturl="{{ basicItem.targetUrl }}"
                style="background-image:url({{ basicItem.basicImgUrl }});{{c1.contactStyle(basicItem,'wi,he')}}"
                wx:if="{{s1.isTrue('actionCheckCharge',awardsInfo,basicItem)}}"
              ></button>
              <button
                hover-class="none"
                class="button-common bg-normal"
                bindtap="actionViewCard"
                data-item="{{ basicItem }}"
                data-targeturl="{{ basicItem.targetUrl }}"
                style="background-image:url({{ basicItem.basicImgUrl }});{{c1.contactStyle(basicItem,'wi,he')}}"
                wx:if="{{s1.isTrue('actionViewCard',awardsInfo,basicItem)}}"
              ></button>
              <!-- 领取时打开app -->
              <button
                hover-class="none"
                class="button-common bg-normal"
                data-item="{{ basicItem }}"
                bindtap="actionLaunchApp"
                style="background-image:url({{ basicItem.basicImgUrl }});{{c1.contactStyle(basicItem,'wi,he')}}"
                wx:if="{{s1.isTrue('actionLaunchApp',awardsInfo,basicItem)}}"
              ></button>
            </block>
          </block>
          <view class="not-arrived-reward" wx:if="{{awardsInfo.type != '9' && awardsInfo.status == '3'}}">
            <view>到账失败</view>
            <view class="not-arrived-reason" wx:if="{{awardsInfo.type == '1'}}" bindtap="actionViewHelp">
              <view>查看原因</view>
              <image class="not-arrived-right-arrow" src="{{ imgUrl }}white-right-arrow.png"></image>
            </view>
          </view>
        </view>
        <!-- <view class="had-reward" wx:if="{{ awardsInfo.status == '1' || awardsInfo.status == '2'}}">
          <image class='had-reward-img' src="{{ imgUrl }}had-reward.png"></image>
        </view> -->
      </view>
    </view>
  </view>
</view>
<!-- 查看券码弹框 -->
<view-card-dialog
  isShowCardDialog="{{ isShowCardDialog }}"
  bind:actionDialogClose="actionCardDialogClose"
  props="{{ cardSelectItem }}"
  options="{{ options }}"
  pageSetting="{{pageSetting}}"
  cardPageSetting="{{ cardPageSetting }}"
  cardContainerInfo="{{ cardContainerInfo }}"
></view-card-dialog>
<!-- 查看红包弹框 -->
<view-money-dialog
  isShowMoneyDialog="{{ isShowMoneyDialog }}"
  bind:actionDialogClose="actionMoneyDialogClose"
  props="{{ moneySelectItem }}"
  options="{{ options }}"
></view-money-dialog>
<!-- 打开物流弹窗 -->
<view-logistics-dialog
  isShowLogisticsDialog="{{ isShowLogisticsDialog }}"
  bind:actionDialogClose="actionLogisticsDialogClose"
  props="{{ logisticsData }}"
></view-logistics-dialog>
